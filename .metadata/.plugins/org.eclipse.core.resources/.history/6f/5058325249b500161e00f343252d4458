package projet_prod_cons;

import jus.poc.prodcons.*;

public class Producteur extends Acteur implements _Producteur  {

	private int nbMessage;
	private Aleatoire temp_prod;
	private ProdCons tampon;
	
	protected Producteur(int type, Observateur observateur, int moyenneTempsDeTraitement,
			int deviationTempsDeTraitement,ProdCons tampon) throws ControlException {
		
		super(type, observateur, moyenneTempsDeTraitement, deviationTempsDeTraitement);
		nbMessage=Aleatoire.valeur(3,2);
		temp_prod= new Aleatoire(moyenneTempsDeTraitement,deviationTempsDeTraitement);
		this.tampon=tampon;
	}

	@Override
	public int deviationTempsDeTraitement() {
		return super.deviationTempsDeTraitement;
	}

	@Override
	public int identification() {
		return super.identification();
	}

	@Override
	public int moyenneTempsDeTraitement() {
		return super.moyenneTempsDeTraitement;
	}

	@Override
	public int nombreDeMessages() {
		
		return nbMessage;
	}

	@Override
	public void run() {
		// TODO Auto-generated method stub
		for (int i=0; i <=nbMessage; i++){
			//TODO je sais pas comment faire pour mettre un message dans le tampon ...
			tampon.put(this,new MessageX(this, i, "patate", new Date()));
			int tempAttente= temp_prod.next();
			wait(tempAttente);
		}
	}
	
	public String toString (){
		return "Producteur "+this.identification();
	}
}
